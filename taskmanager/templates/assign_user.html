{% extends "base.html" %}
{% load static %}
{% block title %}Assign Users{% endblock %}

{% block content %}
<div id="assignUserSection" class="list-section">

  <div class="top-bar">
    <a href="{% url 'admin_panel' %}" class="mui-btn mui-btn--raised back-btn">← Back</a>
    <a href="{% url 'assign_user_create' %}" class="mui-btn mui-btn--raised create-btn">+ Create Assigned User</a>
  </div>

  <h2>Assign Users to Admins</h2>

  <div class="assign-container">
    <div class="assigned-admins">
      <div class="table-card">
        <h4>Assigned Admins</h4>
        <table class="mui-table mui-table--bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>Admin Name</th>
              <th>Assigned Users</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% if assigned_admins %}
              {% for item in assigned_admins %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ item.admin.username }}</td>
                <td>{{ item.count }}</td>
                <td>
                  <a href="{% url 'assign_user_detail' item.admin.id %}" class="mui-btn mui-btn--small mui-btn--primary">View</a>
                </td>
              </tr>
              {% endfor %}
            {% else %}
              <tr>
                <td colspan="4" class="text-center">No assignments found.</td>
              </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>

    <div class="unassigned-users">
      <div class="table-card scrollable">
        <h4>Unassigned Users</h4>
        <ul class="user-list">
          {% if unassigned_users %}
            {% for user in unassigned_users %}
              <li>{{ user.username }}</li>
            {% endfor %}
          {% else %}
            <li>No unassigned users available.</li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}
